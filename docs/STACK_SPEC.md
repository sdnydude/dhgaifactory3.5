# DHG AI Factory - Stack Specification
**Last Updated:** January 27, 2026

---

## Hardware

| Component | Specification |
|-----------|---------------|
| **GPU** | NVIDIA GeForce RTX 5080 (16 GB VRAM) |
| **CPU** | Intel Core Ultra 7 265KF (20 cores) |
| **RAM** | 64 GB DDR5 |
| **Storage** | 2 TB NVMe SSD (1.7 TB available) |
| **Network** | Local IP: 10.0.0.251 |
| **OS** | Ubuntu Linux |

---

## Container Infrastructure

| Metric | Value |
|--------|-------|
| **Total Containers** | 51 |
| **Container Runtime** | Docker + Docker Compose |

---

## AI/LLM Services

| Service | Port | Description |
|---------|------|-------------|
| **Ollama** | 11434 | Local LLM inference (qwen3:14b) |
| **Dify** | 3000 | AI workflow platform |
| **RAGFlow** | 8585 | RAG pipeline platform |
| **LibreChat** | 3010 | Chat interface |

### LLM Models Available
- `qwen3:14b` (local via Ollama)
- OpenAI GPT-4o (API)
- Anthropic Claude (API)
- Google Gemini (API)
- Perplexity (API)

---

## Agent Services

| Agent | Port | Purpose |
|-------|------|---------|
| **dhg-registry-api** | 8011 | Central agent registry |
| **dhg-research** | 8003 | CME research agent |
| **dhg-curriculum** | 8004 | Curriculum development |
| **dhg-outcomes** | 8005 | Outcomes tracking |
| **dhg-competitor-intel** | 8006 | Competitor intelligence |
| **dhg-qa-compliance** | 8007 | Quality assurance |
| **dhg-session-logger** | 8009 | Session logging |
| **dhg-logo-maker** | 8012 | Logo generation |

---

## Databases

### PostgreSQL
| Database | Container | Port | Purpose |
|----------|-----------|------|---------|
| Registry DB | dhg-registry-db | 5432 | Agent registry data |
| Infisical DB | infisical-db | 5432 | Secrets metadata |
| Transcribe DB | dhg-transcribe-db | 5432 | Transcription data |

### MySQL
| Database | Container | Port | Purpose |
|----------|-----------|------|---------|
| RAGFlow | docker-mysql-1 | 5455 | RAGFlow data |

### Redis
| Instance | Container | Purpose |
|----------|-----------|---------|
| Dify Redis | docker-redis-1 | Dify caching |
| Infisical Redis | infisical-dev-redis | Infisical caching |
| LibreChat Redis | (shared) | Chat caching |

### MongoDB
| Database | Container | Purpose |
|----------|-----------|---------|
| LibreChat | chat-mongodb | Chat history |

---

## Vector & Search

| Service | Container | Port | Purpose |
|---------|-----------|------|---------|
| **Elasticsearch** | docker-es01-1 | 1200 | RAGFlow search |
| **Meilisearch** | chat-meilisearch | 7700 | LibreChat search |
| **Vector DB** | vectordb | 5432 | Embeddings storage |

---

## Object Storage

| Service | Container | Ports | Purpose |
|---------|-----------|-------|---------|
| **MinIO** | docker-minio-1 | 9010 (API), 9011 (Console) | Document storage |

---

## Secrets Management

| Service | URL | Purpose |
|---------|-----|---------|
| **Infisical** | https://secrets.digitalharmonyai.com | Centralized secrets vault |

---

## External Access

### Cloudflare Tunnel Routes

| Hostname | Internal Target | Service |
|----------|-----------------|---------|
| `dify.digitalharmonyai.com` | localhost:3000 | Dify AI Platform |
| `secrets.digitalharmonyai.com` | localhost:8089 | Infisical Secrets |
| `app.digitalharmonyai.com` | localhost:3010 | LibreChat |

---

## Authentication

| Service | Method |
|---------|--------|
| Dify | Google OAuth + Email |
| Infisical | Google OAuth |
| LibreChat | Email/Password |
| Cloudflare Access | Google OAuth |

---

## API Keys & Integrations

| Provider | Purpose |
|----------|---------|
| OpenAI | GPT-4o, embeddings |
| Anthropic | Claude models |
| Google AI | Gemini models |
| Perplexity | Web search |
| LangChain/LangSmith | Agent tracing |
| NCBI/PubMed | Medical research |

---

## Port Summary

| Port Range | Usage |
|------------|-------|
| 2024 | Registry API gRPC |
| 3000 | Dify UI |
| 3010 | LibreChat |
| 5455 | MySQL (RAGFlow) |
| 8003-8012 | DHG Agent Services |
| 8089 | Infisical |
| 8585 | RAGFlow |
| 9010-9011 | MinIO |
| 11434 | Ollama |

---

## Monitoring & Health

- **Workflow:** `/data-infra-check` - Full infrastructure health check
- **Workflow:** `/agent-check` - Agent status verification

---

## Backup Locations

| Data | Location |
|------|----------|
| Secrets Backup | `/home/swebber64/DHG/aifactory3.5/secrets_backup_*.env` |
| Project Code | `/home/swebber64/DHG/aifactory3.5/dhgaifactory3.5/` |
| Docker Volumes | Managed by Docker |

---

*Generated by DHG AI Factory system audit*
